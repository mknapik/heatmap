# https://taskfile.dev

version: '2'

vars:
  PRETTIER_GLOB: '**/*.{js,jsx,ts,tsx,css,less,scss,vue,json,gql,md,yml,yaml}'

tasks:
  default:
    cmds:
      - task: build
  dependencies:
    cmds:
      - yarn
  start:
    deps: [dependencies]
    cmds:
      - yarn run parcel src/index.html
  format:
    desc: ' '
    cmds:
      - |-
        npx prettier --write --list-different "{{.PRETTIER_GLOB}}"
  build:
    cmds:
      - yarn run tsc -p .
  build:watch:
    cmds:
      - yarn run tsc -p . --watch
  hook:format:
    desc: ' '
    cmds:
      - |-
        npx prettier --list-different "{{.PRETTIER_GLOB}}"
  prerequisites:
    deps: [prerequisites:node, prerequisites:yarn, prerequisites:lefthook]
  prerequisites:node:
    status:
      - command -v node
  prerequisites:yarn:
    status:
      - command -v yarn
  prerequisites:lefthook:
    status:
      - command -v lefthook
